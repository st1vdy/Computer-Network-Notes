# 差错控制

## 奇偶校验

在待发送的数据后面添加1位奇偶校验位，使整个数据（包含校验位）中“1”的个数为奇数（奇校验）或偶数（偶）校验。

<img src="../../../计算机网络/第三章-数据链路层/pics/parity_check.png" alt="parity_check" style="zoom: 33%;" />

显然，奇偶校验只能在**奇数个位置发生误码**时才能检测出差错，误检率高。

## 循环冗余校验CRC

CRC(Cyclic Redundancy Check)。

### 简要流程

1. 收发双方约定好一个**生成多项式** $G(x)$ 。
2. 发送方基于待发送的数据和生成多项式计算出差错检测码（**冗余码**），将其添加到待传输数据的后面一起传输。
3. 接收方通过生成多项式计算收到的数据是否产生了误码。

<img src="../../../计算机网络/第三章-数据链路层/pics/crc_send.png" alt="crc_send" style="zoom: 33%;" />

<center>CRC发送方</center>

<img src="../../../计算机网络/第三章-数据链路层/pics/crc_receive.png" alt="crc_receive" style="zoom:33%;" />

<center>CRC接收方</center>

CRC计算过程中的除法并不是常规的除法，实际上是**模2意义**下的多项式除法，因此计算时采用异或运算。即 $待发送数据的二进制表示\pmod {生成多项式的二进制表示}$。

> 具体流程看例题理解更简单。

### 例题

> 待发送信息为 `101001`，生成多项式为 $G(x)=x^3+x^2+1$，计算余数。

1. 第一步，给发送信息补上生成多项式最高幂次个零，即 `101001` 补上3个0：`101001000`。
2. 求出余数 `101001000 / 1101 = 110101, R=1`。
3. 余数的位数应与生成多项式的最高幂次相同，因此余数为 `001`。



> 接受到的信息为 `101101001`，生成多项式为 $G(x)=x^3+x^2+1$，判断传输是否误码？

1. 第一步，给发送信息补上生成多项式最高幂次个零，即 `101101001` 补上3个0：`101101001000`。
2. 求出余数 `101101001000 / 1101 = 110010, R = 11`。
3. 余数非零，产生了误码。

